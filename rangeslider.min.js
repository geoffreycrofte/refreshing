var style_el = document.createElement('style'), 
    slider_els = document.querySelectorAll('input[type=range]'), 
    n_sliders = slider_els.length, 
    styles = [], 
    pp = ['-webkit-slider-runnable-', '-moz-range-'], 
    n_pp = pp.length;

document.body.appendChild(style_el);

for(var i = 0; i < n_sliders; i++) {
  styles.push('');
  
  slider_els[i].addEventListener('input', function() {
    var idx = this.id.split('r')[1], 
        min = this.min || 0, 
        max = this.max || 100, 
        perc = ((this.value - min)/(max - min)*100), 
        sel = '.js input[type=range]:nth-of-type(' + idx + ')', 
        selp = '.js #' + this.id, 
        val = perc + '% 100%', 
        str = '';
    
    for(var j = 0; j < n_pp; j++) {
      if(idx == 1 || j == 1) {
        str += sel + '::' + pp[j] + 'track{background-size:' + val + '}';
      }
      else {
        str += selp + ' /deep/ #track:after,' + 
        	selp + '::' + pp[0] + 'track:after{width:' + perc + '%}';
      }
    }
                    
    styles[idx] = str;
    style_el.textContent = styles.join('');
  }, false);
}